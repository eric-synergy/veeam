(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var aa=this||self;function m(a,b){a=a.split(".");var c=aa;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};var n={},p=null;
function t(a){var b;void 0===b&&(b=0);if(!p){p={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++){var e=c.concat(d[f].split(""));n[f]=e;for(var g=0;g<e.length;g++){var h=e[g];void 0===p[h]&&(p[h]=g)}}}b=n[b];c=Array(Math.floor(a.length/3));d=b[64]||"";for(f=e=0;e<a.length-2;e+=3){var k=a[e],l=a[e+1];h=a[e+2];g=b[k>>2];k=b[(k&3)<<4|l>>4];l=b[(l&15)<<2|h>>6];h=b[h&63];c[f++]=g+k+l+h}g=0;h=d;switch(a.length-e){case 2:g=
a[e+1],h=b[(g&15)<<2]||d;case 1:a=a[e],c[f]=b[a>>2]+b[(a&3)<<4|g>>4]+h+d}return c.join("")};var u="undefined"!==typeof Uint8Array,v={};let w;var x=class{constructor(a){if(v!==v)throw Error("illegal external caller");this.A=a;if(null!=a&&0===a.length)throw Error("ByteString should be constructed with non-empty values");}};const y=Symbol();function z(a,b){if(y)return a[y]|=b;if(void 0!==a.m)return a.m|=b;Object.defineProperties(a,{m:{value:b,configurable:!0,writable:!0,enumerable:!1}});return b}function A(a){let b;y?b=a[y]:b=a.m;return null==b?0:b}function B(a,b){y?a[y]=b:void 0!==a.m?a.m=b:Object.defineProperties(a,{m:{value:b,configurable:!0,writable:!0,enumerable:!1}})}function C(a){z(a,16);return a}function ca(a,b){B(b,(a|0)&-51)}function D(a,b){B(b,(a|18)&-41)};var E={};function F(a){return null!==a&&"object"===typeof a&&!Array.isArray(a)&&a.constructor===Object}var G;const H=[];B(H,23);G=Object.freeze(H);function I(a){if(A(a.j)&2)throw Error("Cannot mutate an immutable Message");}function J(a){var b=a.length;(b=b?a[b-1]:void 0)&&F(b)?b.g=1:a.push({g:1})};let K;function M(a,b){K=b;a=new a(b);K=void 0;return a};function da(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(a)if(Array.isArray(a)){if(0!==(A(a)&128))return a=Array.prototype.slice.call(a),J(a),a}else{if(u&&null!=a&&a instanceof Uint8Array)return t(a);if(a instanceof x){const b=a.A;return null==b?"":"string"===typeof b?b:a.A=t(b)}}}return a};function N(a,b,c,d){if(null!=a){if(Array.isArray(a))a=O(a,b,c,void 0!==d);else if(F(a)){const f={};for(let e in a)f[e]=N(a[e],b,c,d);a=f}else a=b(a,d);return a}}function O(a,b,c,d){const f=A(a);d=d?!!(f&16):void 0;a=Array.prototype.slice.call(a);for(let e=0;e<a.length;e++)a[e]=N(a[e],b,c,d);c(f,a);return a}function ea(a){return a.u===E?a.toJSON():da(a)}function fa(a,b){a&128&&J(b)};function P(a){return a.h||(a.h=a.j[a.i+a.s]={})}function Q(a,b,c,d){a.l&&(a.l=void 0);b>=a.i||d?P(a)[b]=c:(a.j[b+a.s]=c,(a=a.h)&&b in a&&delete a[b])}function R(a,b,c){var d=-1===c?null:c>=a.i?a.h?a.h[c]:void 0:a.j[c+a.s];{let e=!1;var f=null==d||"object"!==typeof d||(e=Array.isArray(d))||d.u!==E?e?new b(d):void 0:d}f!==d&&null!=f&&(Q(a,c,f,!1),z(f.j,A(a.j)&-33));b=f;if(null==b)return b;A(a.j)&2||(d=b,A(d.j)&2&&(f=S(d,!1),f.l=d,d=f),d!==b&&(b=d,Q(a,c,b,!1)));return b}
function T(a,b,c,d){I(a);if(null!=c){var f=[];z(f,1);let e=!1;for(let g=0;g<c.length;g++)f[g]=c[g].j,e=e||!!(A(f[g])&2);a.o||(a.o={});a.o[b]=c;c=f;e?y?c[y]&&(c[y]&=-9):void 0!==c.m&&(c.m&=-9):z(c,8)}else a.o&&(a.o[b]=void 0),f=G;Q(a,b,f,d)};function U(a){const b=A(a);if(b&2)return a;a=Array.prototype.map.call(a,ha,void 0);D(b,a);Object.freeze(a);return a}function V(a,b,c=D){if(null!=a){if(u&&a instanceof Uint8Array)return a.length?new x(new Uint8Array(a)):w||(w=new x(null));if(Array.isArray(a)){const d=A(a);if(d&2)return a;if(b&&!(d&32)&&(d&16||0===d))return B(a,d|2),a;a=O(a,V,c,!0);b=A(a);b&4&&b&2&&Object.freeze(a);return a}return a.u===E?ha(a):a}}function ha(a){if(A(a.j)&2)return a;a=S(a,!0);z(a.j,2);return a}
function S(a,b){const c=a.j;var d=C([]),f=a.constructor.h;f&&d.push(f);0!==(A(c)&128)&&J(d);b=b||A(a.j)&2?D:ca;d=M(a.constructor,d);a.v&&(d.v=a.v.slice());f=!!(A(c)&16);for(let q=0;q<c.length;q++){var e=c[q];if(q===c.length-1&&F(e))for(const L in e){var g=+L;if(Number.isNaN(g))P(d)[g]=e[g];else{var h=d,k=g;g=e[L];var l=f,r=b;const ba=a.o&&a.o[k];ba?T(h,k,U(ba),!0):(g=V(g,l,r),I(h),Q(h,k,g,!0))}}else h=d,g=q-a.s,l=f,r=b,(k=a.o&&a.o[g])?T(h,g,U(k),!1):(e=V(e,l,r),I(h),Q(h,g,e,!1))}return d};function ia(a,b){if(null==b||""==b)return new a;b=JSON.parse(b);if(!Array.isArray(b))throw Error(void 0);return M(a,C(b))}
var W=class{constructor(a,b,c){null==a&&(a=K);K=void 0;var d=this.constructor.i||0,f=0<d,e=this.constructor.h,g=!1;if(null==a){a=e?[e]:[];var h=!0;B(a,48)}else{if(!Array.isArray(a))throw Error();if(e&&e!==a[0])throw Error();const k=z(a,0);let l=k;if(h=0!==(16&l))(g=0!==(32&l))||(l|=32);if(f)if(128&l)d=0;else{if(0<a.length){const r=a[a.length-1];if(F(r)&&"g"in r){d=0;l|=128;delete r.g;let q=!0;for(let L in r){q=!1;break}q&&a.pop()}}}else if(128&l)throw Error();k!==l&&B(a,l)}this.s=(e?0:-1)-d;this.o=
void 0;this.j=a;a:{e=this.j.length;d=e-1;if(e&&(e=this.j[d],F(e))){this.h=e;this.i=d-this.s;break a}void 0!==b&&-1<b?(this.i=Math.max(b,d+1-this.s),this.h=void 0):this.i=Number.MAX_VALUE}if(!f&&this.h&&"g"in this.h)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(c){b=h&&!g&&!0;f=this.i;let k;for(h=0;h<c.length;h++)g=c[h],g<f?(g+=this.s,(d=a[g])?ja(d,b):a[g]=G):(k||(k=P(this)),(d=k[g])?ja(d,b):k[g]=G)}}toJSON(){return O(this.j,ea,fa)}};
function ja(a,b){if(Array.isArray(a)){var c=A(a),d=1;!b||c&2||(d|=16);(c&d)!==d&&B(a,c|d)}}W.prototype.u=E;W.prototype.toString=function(){return this.j.toString()};var la=class extends W{constructor(a){super(a,-1,ka)}},ka=[8];var na=class extends W{constructor(a){super(a,-1,ma)}},ma=[17];var pa=class extends W{constructor(a){super(a,-1,oa)}},oa=[27];var qa=class extends W{constructor(a){super(a)}};var sa=class extends W{constructor(a){super(a,-1,ra)}},ra=[1,2,3,6];function X(a,b){a=a.getElementsByTagName("META");for(let c=0;c<a.length;++c)if(a[c].getAttribute("name")===b)return a[c].getAttribute("content")||"";return""};function Y(a,b){a=a.body;var c={detail:void 0};let d;"function"===typeof window.CustomEvent?d=new CustomEvent(b,c):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!!c.bubbles,!!c.cancelable,c.detail));a.dispatchEvent(d)}
var ta=class{constructor(a){this.body=a;this.h=[];X(a,"sampling_mod");var b=X(a,"namespace");if(!b){b="ns-"+(0,Math.random)().toString(36).substr(2,5);a:{var c=a.getElementsByTagName("META");for(let d=0;d<c.length;++d)if("namespace"===c[d].getAttribute("name")&&c[d].getAttribute("index")===(0).toString()){c[d].setAttribute("content",b);break a}c=a.querySelector("#mys-meta");c||(c=document.createElement("div"),c.id="mys-meta",c.style.position="absolute",c.style.display="none",a.appendChild(c));a=document.createElement("META");
a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());c.appendChild(a)}}if(!(0<this.h.length)){a=X(this.body,"environment");for(const d of a.split("|"))d&&this.h.push(d)}}addEventListener(a,b){this.body.addEventListener(a,b)}};function ua(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function va(a){if(1>=a.i.offsetWidth||1>=a.i.offsetHeight)return!1;a.h.remove();Y(a.context,"spanReady");return!0}
var wa=class{constructor(a){this.context=a;this.l={C:!1,B:100};this.i=ua("SPAN");this.h=ua("DIV");this.i.style.fontSize="6px";this.i.textContent="go";this.h.style.position="absolute";this.h.style.top="100%";this.h.style.left="100%";this.h.style.width="1px";this.h.style.height="0";this.h.style.overflow="hidden";this.h.style.visibility="hidden";this.h.appendChild(this.i)}wait(){if(!this.l.C&&(Y(this.context,"spanStart"),this.context.body.appendChild(this.h),!va(this)))return new Promise(a=>{const b=
setInterval(()=>{va(this)&&(clearInterval(b),a())},this.l.B)})}};var xa=class{constructor(a,b){this.context=a;this.h=R(b,pa,1)||new pa;R(b,la,12)||new la;R(this.h,na,10)||new na}};function ya(a){a.l.length=0;a.i=!0}function za(a,b){a.h=!0;const c=()=>{a.i=!1;const d=a.l.shift();return void 0===d?(a.h=!1,Promise.resolve()):za(a,d())};return b?b.then(c,()=>{if(a.i)return c();a.h=!1;return Promise.reject()}):c()}function Aa(a,b){for(const c of b)a.l.push(c);if(!a.h)return za(a)}var Ba=class{constructor(){this.i=this.h=!1;this.l=[]}};function Ca(a){var b=X(a.context.body,"render_config")||"[]";b=ia(qa,b);return new xa(a.context,b)}function Da(a){ya(a.l);return Aa(a.l,[()=>{let b;a.i||(a.i=Ca(a));b=(new wa(a.context)).wait();Y(a.context,"browserStart");Y(a.context,"browserStartEnd");a.h&=-31;a.h|=2;return b},()=>{Y(a.context,"browserReady");Y(a.context,"browserReadyEnd");a.h|=4;Y(a.context,"overallReady")},()=>{Y(a.context,"browserQuiet");Y(a.context,"browserQuietEnd");a.h|=8}])}
function Ea(a){ia(sa,X(a.context.body,"engine_msg")||"[]");return Da(a)||Promise.resolve()}function Fa(){var a=Z;a.h&=-31;a.h|=1;let b=0;const c=a.context.body;c.addEventListener("browserRender",()=>{++b;if(1===b)Y(a.context,"overallStart"),Ea(a).then(()=>{Y(a.context,"overallQuiet")});else{var d=c.clientHeight;c.clientWidth&&d&&(a.i||(a.i=Ca(a)),Ea(a))}})}var Ga=class{constructor(a){this.l=new Ba;this.h=0;this.context=new ta(a)}};let Z;m("mys.engine.init",(a,b)=>{Z=new Ga(b);Fa()});m("mys.engine.stage",()=>{let a;return(null==(a=Z)?void 0:a.h)||0});}).call(this);
